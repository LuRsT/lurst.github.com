<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />

    <title>Lumbercoder : How to install Manjaro Linux with /home encrypted</title>

    <link
        rel="shortcut icon"
        href="http://lumbercoder.com/theme/img/lumbercoder-16.png"
        type="text/css"
    />
    <link
        rel="stylesheet"
        href="http://lumbercoder.com/theme/css/kraken.css"
        type="text/css"
    />
    <link
        rel="stylesheet"
        href="http://lumbercoder.com/theme/css/main.css"
        type="text/css"
    />
    <link
        href="http://lumbercoder.com/"
        type="application/atom+xml"
        rel="alternate"
        title="Lumbercoder ATOM Feed"
    />

    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body>
    <article class="container">
        <h1>
            <a href="http://lumbercoder.com/"><img src="http://lumbercoder.com/theme/img/lumbercoder-64.png" width="24" height="24">/home/Lumbercoder</a>
        </h1>

        <a class="btn btn-green" href="http://lumbercoder.com/">Home</a>
        <a class="btn btn-green" href="http://lumbercoder.com/archives.html">Posts</a>


            <a class="btn btn-green" href="http://lumbercoder.com/pages/projects.html">
                Projects
            </a>
            <a class="btn btn-green" href="http://lumbercoder.com/pages/talks.html">
                Talks
            </a>

        <hr />

    <header>
        <h2>
            <a href="http://lumbercoder.com/how-to-install-manjaro-linux-with-home-encrypted.html" id="page-title">
                How to install Manjaro Linux with /home encrypted
            </a>
        </h2>
            <time datetime="2013-12-28T00:00:00">
                Sat 28 December 2013
            </time>
    </header>
    <article>
        <p>So, this weekend I decided to upgrade my little Asus Vivobook with my old SSD
since I want to only use one laptop, and having one laptop that I don't intend
to use for programming with an SDD and another which I do use for programming
without doesn't make sense.</p>
<p>Having moved all the data around is time consuming enough, but I still had to
deal with the fact that the laptop uses a slim hard drive and my SSD wasn't very
slim at all, so I had to remove the SSD casing and plug it it, and it worked
right away!</p>
<p>But I was far from finishing the setup of my machine, I had to install Linux on
it, and this shouldn't be difficult but I wanted my /home partition to be
encrypted and that complicated everything...</p>
<p>I won't bother you with the details of my many installations until I got it
right, so here are the instructions:</p>
<ul>
<li>Create the partitions you'll need with Gparted;</li>
<li>Use the testing installation (cli) and setup everything that you need, just
don't partition anything since you already did it in Gparted.</li>
<li>After that create the LUKS partition in the /home partition</li>
<li>Configure your system by putting these HOOKS in <code>mkinitcpio.conf</code> BEFORE
<code>filesystem</code>:<ul>
<li><code>encrypt</code></li>
<li><code>lvm2</code></li>
</ul>
</li>
<li>
<p>Add this line to <code>/etc/crypttab</code>:</p>
<p>home /dev/sda3 none luks</p>
</li>
</ul>
<p>If you could not do the last step during the installation it's ok, you can do
it from the live cd, just change the file in the correct partition that should
be mounted by manjaro.</p>
<p>If you failed to put the HOOKS in <code>mkinitcpio.conf</code> (which I did), you'll have
to do a little <code>chroot</code> magic, which I'll explain in another article...</p>
    </article>
    </article>

    <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5550586-7']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>

<a href="https://github.com/LuRsT/lurst.github.io">
    <img
        style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub"
    />
</a>
    <script src="http://lumbercoder.com/theme/js/kraken.js"></script>
</body>
</html>